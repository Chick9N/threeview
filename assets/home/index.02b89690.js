import{r as Ue,c as Ze,o as Fe,f as j,g as C,v as Xe,j as v,F as ye,x as be,u as We,y as ge,z as we,t as B,A as Ee,B as Ve}from"../@vue/@vue.a66389fe.js";import{E as Ke,V as b,M as z,T as N,Q as Pe,S as xe,a as O,b as Z,W as Be,c as $e,P as qe,d as Ge,R as Qe,e as Je,f as et,D as tt,g as nt}from"../three/three.4407508a.js";import{_ as ot}from"../index-1e6203a6.js";import"../vendor/vendor.dcaf7c9e.js";const Te={type:"change"},$={type:"start"},ve={type:"end"};class at extends Ke{constructor(c,a){super(),a===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=c,this.domElement=a,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new b,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:z.ROTATE,MIDDLE:z.DOLLY,RIGHT:z.PAN},this.touches={ONE:N.ROTATE,TWO:N.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",pe),this._domElementKeyEvents=t},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Te),e.update(),d=r.NONE},this.update=function(){const t=new b,n=new Pe().setFromUnitVectors(c.up,new b(0,1,0)),m=n.clone().invert(),y=new b,x=new Pe,D=2*Math.PI;return function(){const fe=e.object.position;t.copy(fe).sub(e.target),t.applyQuaternion(n),o.setFromVector3(t),e.autoRotate&&d===r.NONE&&F(Oe()),e.enableDamping?(o.theta+=i.theta*e.dampingFactor,o.phi+=i.phi*e.dampingFactor):(o.theta+=i.theta,o.phi+=i.phi);let R=e.minAzimuthAngle,A=e.maxAzimuthAngle;return isFinite(R)&&isFinite(A)&&(R<-Math.PI?R+=D:R>Math.PI&&(R-=D),A<-Math.PI?A+=D:A>Math.PI&&(A-=D),R<=A?o.theta=Math.max(R,Math.min(A,o.theta)):o.theta=o.theta>(R+A)/2?Math.max(R,o.theta):Math.min(A,o.theta)),o.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=h,o.radius=Math.max(e.minDistance,Math.min(e.maxDistance,o.radius)),e.enableDamping===!0?e.target.addScaledVector(u,e.dampingFactor):e.target.add(u),t.setFromSpherical(o),t.applyQuaternion(m),fe.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(i.theta*=1-e.dampingFactor,i.phi*=1-e.dampingFactor,u.multiplyScalar(1-e.dampingFactor)):(i.set(0,0,0),u.set(0,0,0)),h=1,g||y.distanceToSquared(e.object.position)>l||8*(1-x.dot(e.object.quaternion))>l?(e.dispatchEvent(Te),y.copy(e.object.position),x.copy(e.object.quaternion),g=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",ue),e.domElement.removeEventListener("pointerdown",ce),e.domElement.removeEventListener("pointercancel",le),e.domElement.removeEventListener("wheel",de),e.domElement.removeEventListener("pointermove",W),e.domElement.removeEventListener("pointerup",V),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",pe)};const e=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=r.NONE;const l=1e-6,o=new xe,i=new xe;let h=1;const u=new b;let g=!1;const M=new O,_=new O,k=new O,T=new O,p=new O,f=new O,E=new O,P=new O,L=new O,s=[],I={};function Oe(){return 2*Math.PI/60/60*e.autoRotateSpeed}function Y(){return Math.pow(.95,e.zoomSpeed)}function F(t){i.theta+=t}function q(t){i.phi+=t}const G=function(){const t=new b;return function(m,y){t.setFromMatrixColumn(y,0),t.multiplyScalar(-m),u.add(t)}}(),Q=function(){const t=new b;return function(m,y){e.screenSpacePanning===!0?t.setFromMatrixColumn(y,1):(t.setFromMatrixColumn(y,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(m),u.add(t)}}(),S=function(){const t=new b;return function(m,y){const x=e.domElement;if(e.object.isPerspectiveCamera){const D=e.object.position;t.copy(D).sub(e.target);let H=t.length();H*=Math.tan(e.object.fov/2*Math.PI/180),G(2*m*H/x.clientHeight,e.object.matrix),Q(2*y*H/x.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(G(m*(e.object.right-e.object.left)/e.object.zoom/x.clientWidth,e.object.matrix),Q(y*(e.object.top-e.object.bottom)/e.object.zoom/x.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function X(t){e.object.isPerspectiveCamera?h/=t:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*t)),e.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function J(t){e.object.isPerspectiveCamera?h*=t:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/t)),e.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ee(t){M.set(t.clientX,t.clientY)}function Me(t){E.set(t.clientX,t.clientY)}function te(t){T.set(t.clientX,t.clientY)}function _e(t){_.set(t.clientX,t.clientY),k.subVectors(_,M).multiplyScalar(e.rotateSpeed);const n=e.domElement;F(2*Math.PI*k.x/n.clientHeight),q(2*Math.PI*k.y/n.clientHeight),M.copy(_),e.update()}function ke(t){P.set(t.clientX,t.clientY),L.subVectors(P,E),L.y>0?X(Y()):L.y<0&&J(Y()),E.copy(P),e.update()}function Le(t){p.set(t.clientX,t.clientY),f.subVectors(p,T).multiplyScalar(e.panSpeed),S(f.x,f.y),T.copy(p),e.update()}function Re(t){t.deltaY<0?J(Y()):t.deltaY>0&&X(Y()),e.update()}function Ae(t){let n=!1;switch(t.code){case e.keys.UP:S(0,e.keyPanSpeed),n=!0;break;case e.keys.BOTTOM:S(0,-e.keyPanSpeed),n=!0;break;case e.keys.LEFT:S(e.keyPanSpeed,0),n=!0;break;case e.keys.RIGHT:S(-e.keyPanSpeed,0),n=!0;break}n&&(t.preventDefault(),e.update())}function ne(){if(s.length===1)M.set(s[0].pageX,s[0].pageY);else{const t=.5*(s[0].pageX+s[1].pageX),n=.5*(s[0].pageY+s[1].pageY);M.set(t,n)}}function oe(){if(s.length===1)T.set(s[0].pageX,s[0].pageY);else{const t=.5*(s[0].pageX+s[1].pageX),n=.5*(s[0].pageY+s[1].pageY);T.set(t,n)}}function ae(){const t=s[0].pageX-s[1].pageX,n=s[0].pageY-s[1].pageY,m=Math.sqrt(t*t+n*n);E.set(0,m)}function Se(){e.enableZoom&&ae(),e.enablePan&&oe()}function De(){e.enableZoom&&ae(),e.enableRotate&&ne()}function ie(t){if(s.length==1)_.set(t.pageX,t.pageY);else{const m=K(t),y=.5*(t.pageX+m.x),x=.5*(t.pageY+m.y);_.set(y,x)}k.subVectors(_,M).multiplyScalar(e.rotateSpeed);const n=e.domElement;F(2*Math.PI*k.x/n.clientHeight),q(2*Math.PI*k.y/n.clientHeight),M.copy(_)}function se(t){if(s.length===1)p.set(t.pageX,t.pageY);else{const n=K(t),m=.5*(t.pageX+n.x),y=.5*(t.pageY+n.y);p.set(m,y)}f.subVectors(p,T).multiplyScalar(e.panSpeed),S(f.x,f.y),T.copy(p)}function re(t){const n=K(t),m=t.pageX-n.x,y=t.pageY-n.y,x=Math.sqrt(m*m+y*y);P.set(0,x),L.set(0,Math.pow(P.y/E.y,e.zoomSpeed)),X(L.y),E.copy(P)}function ze(t){e.enableZoom&&re(t),e.enablePan&&se(t)}function Ne(t){e.enableZoom&&re(t),e.enableRotate&&ie(t)}function ce(t){e.enabled!==!1&&(s.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",W),e.domElement.addEventListener("pointerup",V)),He(t),t.pointerType==="touch"?Ie(t):je(t))}function W(t){e.enabled!==!1&&(t.pointerType==="touch"?Ye(t):Ce(t))}function V(t){he(t),s.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",W),e.domElement.removeEventListener("pointerup",V)),e.dispatchEvent(ve),d=r.NONE}function le(t){he(t)}function je(t){let n;switch(t.button){case 0:n=e.mouseButtons.LEFT;break;case 1:n=e.mouseButtons.MIDDLE;break;case 2:n=e.mouseButtons.RIGHT;break;default:n=-1}switch(n){case z.DOLLY:if(e.enableZoom===!1)return;Me(t),d=r.DOLLY;break;case z.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;te(t),d=r.PAN}else{if(e.enableRotate===!1)return;ee(t),d=r.ROTATE}break;case z.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ee(t),d=r.ROTATE}else{if(e.enablePan===!1)return;te(t),d=r.PAN}break;default:d=r.NONE}d!==r.NONE&&e.dispatchEvent($)}function Ce(t){if(e.enabled!==!1)switch(d){case r.ROTATE:if(e.enableRotate===!1)return;_e(t);break;case r.DOLLY:if(e.enableZoom===!1)return;ke(t);break;case r.PAN:if(e.enablePan===!1)return;Le(t);break}}function de(t){e.enabled===!1||e.enableZoom===!1||d!==r.NONE||(t.preventDefault(),e.dispatchEvent($),Re(t),e.dispatchEvent(ve))}function pe(t){e.enabled===!1||e.enablePan===!1||Ae(t)}function Ie(t){switch(me(t),s.length){case 1:switch(e.touches.ONE){case N.ROTATE:if(e.enableRotate===!1)return;ne(),d=r.TOUCH_ROTATE;break;case N.PAN:if(e.enablePan===!1)return;oe(),d=r.TOUCH_PAN;break;default:d=r.NONE}break;case 2:switch(e.touches.TWO){case N.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Se(),d=r.TOUCH_DOLLY_PAN;break;case N.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;De(),d=r.TOUCH_DOLLY_ROTATE;break;default:d=r.NONE}break;default:d=r.NONE}d!==r.NONE&&e.dispatchEvent($)}function Ye(t){switch(me(t),d){case r.TOUCH_ROTATE:if(e.enableRotate===!1)return;ie(t),e.update();break;case r.TOUCH_PAN:if(e.enablePan===!1)return;se(t),e.update();break;case r.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ze(t),e.update();break;case r.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ne(t),e.update();break;default:d=r.NONE}}function ue(t){e.enabled!==!1&&t.preventDefault()}function He(t){s.push(t)}function he(t){delete I[t.pointerId];for(let n=0;n<s.length;n++)if(s[n].pointerId==t.pointerId){s.splice(n,1);return}}function me(t){let n=I[t.pointerId];n===void 0&&(n=new O,I[t.pointerId]=n),n.set(t.pageX,t.pageY)}function K(t){const n=t.pointerId===s[0].pointerId?s[1]:s[0];return I[n.pointerId]}e.domElement.addEventListener("contextmenu",ue),e.domElement.addEventListener("pointerdown",ce),e.domElement.addEventListener("pointercancel",le),e.domElement.addEventListener("wheel",de,{passive:!1}),this.update()}}const it={animateCamera:(w,c,a,e,r=2e3,d)=>{const l=new Z.Tween({x1:w.position.x,y1:w.position.y,z1:w.position.z,x2:c.target.x,y2:c.target.y,z2:c.target.z});l.to({x1:a.x,y1:a.y,z1:a.z,x2:e.x,y2:e.y,z2:e.z},r),l.onUpdate(function(o){w.position.x=o.x1,w.position.y=o.y1,w.position.z=o.z1,c.target.x=o.x2,c.target.y=o.y2,c.target.z=o.z2,c.update()}),l.onComplete(function(){c.enabled=!0,c.update(),d()}),l.easing(Z.Easing.Cubic.InOut),l.start()}},st=w=>new Promise(c=>{setTimeout(c,w)}),rt=(w,c)=>{var a=document.createElement("div");a.style.position="fixed",a.style.maxWidth="60%",a.style.color="white",a.style.fontSize="14px",a.style.boxSizing="border-box",a.style.background="rgba(0,0,0,0.76)",a.style.padding="0.8em 2.618em",a.style.top="40%",a.style.left="50%",a.style.zIndex=999999999,a.style.borderRadius="3px",a.style.opacity="0",a.innerText=w,document.body.appendChild(a),a.style.marginLeft=-(a.offsetWidth/2)+"px",a.style.marginTop=-a.offsetHeight/2+"px",setTimeout(function(){a.style.marginLeft=-(a.offsetWidth/2)+"px",a.style.marginTop=-a.offsetHeight+"px",a.style.transition="all 0.3s",a.style.opacity="1",setTimeout(function(){a.style.opacity="0",a.style.marginTop=-a.offsetHeight/2+"px",setTimeout(function(){document.body.removeChild(a)},300)},parseInt(c)||5e3)},0)},U=[{name:"八食堂二楼",key:"canteen-8-2",map:new URL("/threeview/assets/map_canteen8_2f-d2a2550d.jpg",self.location).href,showSwitch:!0,position:new b(0,0,0),interactivePoints:[{key:"jiaoshangyin",value:"椒上瘾",description:"水煮肉片",info:"水煮肉片，辣味十足，鲜香扑鼻！这道经典川菜将细嫩的肉片与特制的辣椒、花椒一起煮制，带来麻辣的双重享受。肉片鲜嫩多汁，浸透了浓郁的汤底，每一口都让人欲罢不能。搭配丰富的香料和调料，激发出独特的麻辣味道，辣而不燥，麻而不苦，令人一试成主顾！无论是与朋友小聚，还是家人共享，水煮肉片都是餐桌上的绝佳选择，辣味与美味并存，带给你前所未有的味蕾冲击！",cover:new URL("/threeview/assets/shuizhuroupian-81a16078.jpg",self.location).href,position:new b(-6,0,-7)},{key:"burger",value:"0090",description:"汉堡薯条",info:"0090是一家专注于高校的汉堡品牌，好吃不贵。",cover:new URL("/threeview/assets/0090-de3b5d7d.jpg",self.location).href,position:new b(0,0,9)},{key:"zixuan",value:"自选菜",description:"多样菜品",info:"自由畅选，美味随心，本窗口提供品类众多的美食。自选菜不仅是一种餐饮方式，更是一种与美味互动的乐趣！无论是喜欢清淡还是热衷辛辣，我们都能为您提供最合适的选择，让您品味无限可能！",cover:new URL("/threeview/assets/chaocai-278e229d.jpg",self.location).href,position:new b(4,0,-8)}]},{name:"八食堂三楼",key:"canteen-8-3",map:new URL("/threeview/assets/map_canteen8_3f-36663fe4.jpg",self.location).href,showSwitch:!0,position:new b(-32,0,0),interactivePoints:[{key:"goodme",value:"古茗",description:"奶茶",info:"浙南小镇，几个平凡的年轻人，一拍即合，决定让喝茶这件事彻底融入日常。随时随地，只要你想， 都可以拿起茶就喝，每天一杯喝不腻。就是2010年古茗品牌诞生的初衷。 古茗期待打造一种极致日常化的喝茶体验，让每一个平凡的人，都能通过喝茶感受、享受当下，并且过得更开心，变得更好。日常化，绝不是快速与随便的。希望每一天的古茗茶饮，都能被喝出品质、细节，甚至是奇思妙想的惊喜。 每一杯古茗，都是“Have a good day!”的鼓励。",cover:new URL("/threeview/assets/goodme-073ab19b.jpg",self.location).href,position:new b(-48,2,-14)}]},{name:"九食堂三楼",key:"canteen-9-3",map:new URL("/threeview/assets/map_canteen9_3f-2752d38d.jpg",self.location).href,showSwitch:!0,position:new b(64,0,0),interactivePoints:[{key:"chashengsheng",value:"茶生生",description:"奶茶",info:"“山水有色，泉城有茶”，作为济南本土的奶茶品牌，茶生生秉承求真务实，敬畏匠者之心，认可自己的城市，认可自己城市的文化与人，做有原则，有尊严的城市品牌。",cover:new URL("/threeview/assets/chashengsheng-fead1272.jpg",self.location).href,position:new b(70,0,0)}]}];const ct={class:"home"},lt={class:"switch"},dt=["onClick"],pt={class:"text"},ut=["onClick"],ht={class:"label-tips"},mt={class:"cover"},ft={class:"info"},yt={class:"p1"},bt={class:"p2"},gt={__name:"index",setup(w){const c=Ue({renderer:null,camera:null,scene:null,controls:null,cameraZAxis:2,currentRoom:"canteen-8-2"}),a=Ze(()=>{const l=[];return U.forEach(o=>{o.interactivePoints&&o.interactivePoints.length>0&&o.interactivePoints.forEach(i=>{i={room:o.key,...i},l.push(i)})}),l}),e=()=>{const l={width:window.innerWidth,height:window.innerHeight},o=document.querySelector("canvas.webgl"),i=new Be({canvas:o});i.setSize(l.width,l.height),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),c.renderer=i;const h=new $e;c.scene=h;const u=new qe(65,l.width/l.height,.1,1e3);u.position.z=c.cameraZAxis,h.add(u),c.camera=u;const g=new at(u,i.domElement);g.target.set(0,0,0),g.enableDamping=!0,g.enablePan=!1,g.maxDistance=12,g.minPolarAngle=Math.PI/2,g.maxPolarAngle=Math.PI/2,c.controls=g,window.addEventListener("resize",()=>{l.width=window.innerWidth,l.height=window.innerHeight,i.setSize(l.width,l.height),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),u.aspect=l.width/l.height,u.updateProjectionMatrix()});const M=new Ge,_=(p,f,E)=>{const P=new Je(16,256,256);P.scale(1,1,-1);const L=new et({map:M.load(E),side:tt}),s=new nt(P,L);return s.name=p,s.position.set(f.x,f.y,f.z),s.rotation.y=Math.PI/2,h.add(s),s};U.map(p=>_(p.key,p.position,p.map)),new Qe;const k=a.value.map((p,f)=>({...p,element:document.querySelector(`.point-${f}`)}));for(const p of k)p.element.classList.add("visible");const T=()=>{if(i)for(const p of k){const f=p.position.clone(),E=f.project(u);if(Math.abs(E.x)>1||Math.abs(E.y)>1||Math.abs(E.z)>1)p.element.style.transform="scale(0, 0)";else{const P=f.x*l.width*.5,L=-f.y*l.height*.5;p.element.style.transform=`translateX(${P}px) translateY(${L}px)`}}g&&g.update(),Z&&Z.update(),i.render(h,u),window.requestAnimationFrame(T)};T()},r=async l=>{const o=U.filter(i=>i.key===l)[0];if(c.camera){const i=o.position.x,h=o.position.y,u=o.position.z;it.animateCamera(c.camera,c.controls,{x:i,y:h,z:c.cameraZAxis},{x:i,y:h,z:u},1600,()=>{}),c.controls.update()}await st(1600),c.currentRoom=o.key},d=l=>{rt(`${l.info}`)};return Fe(()=>{e()}),(l,o)=>(j(),C("div",ct,[o[1]||(o[1]=Xe('<canvas class="webgl" data-v-7355afd6></canvas><div class="vr" data-v-7355afd6><span class="box" data-v-7355afd6><i class="icon" data-v-7355afd6></i><b class="text" data-v-7355afd6>全景漫游</b></span></div>',2)),v("div",lt,[(j(!0),C(ye,null,be(We(U),(i,h)=>ge((j(),C("span",{class:"button",key:h,onClick:u=>r(i.key)},[v("b",pt,B(i.name),1),o[0]||(o[0]=v("i",{class:"icon"},null,-1))],8,dt)),[[we,i.key!==c.currentRoom]])),128))]),(j(!0),C(ye,null,be(a.value,(i,h)=>ge((j(),C("div",{class:Ee(["point",[`point-${h}`,`point-${i.key}`]]),key:h,onClick:u=>d(i)},[v("div",{class:Ee(["label",[`label-${h}`,`label-${i.key}`]])},[v("label",ht,[v("div",mt,[v("i",{class:"icon",style:Ve({background:`url(${i.cover}) no-repeat center`,"background-size":"contain"})},null,4)]),v("div",ft,[v("p",yt,B(i.value),1),v("p",bt,B(i.description),1)])])],2)],10,ut)),[[we,i.room===c.currentRoom]])),128))]))}},Tt=ot(gt,[["__scopeId","data-v-7355afd6"]]);export{Tt as default};
